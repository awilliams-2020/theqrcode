'use client'

import { useState, useEffect } from 'react'

type Language = 'en' | 'es'

// Simple translation object
const translations = {
  en: {
    // Common
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    save: 'Save',
    cancel: 'Cancel',
    delete: 'Delete',
    edit: 'Edit',
    create: 'Create',
    back: 'Back',
    next: 'Next',
    previous: 'Previous',
    close: 'Close',
    open: 'Open',
    search: 'Search',
    filter: 'Filter',
    sort: 'Sort',
    refresh: 'Refresh',
    copy: 'Copy',
    download: 'Download',
    upload: 'Upload',
    share: 'Share',
    print: 'Print',
    email: 'Email',
    phone: 'Phone',
    website: 'Website',
    address: 'Address',
    name: 'Name',
    description: 'Description',
    title: 'Title',
    date: 'Date',
    time: 'Time',
    location: 'Location',
    price: 'Price',
    quantity: 'Quantity',
    total: 'Total',
    subtotal: 'Subtotal',
    tax: 'Tax',
    discount: 'Discount',
    free: 'Free',
    premium: 'Premium',
    basic: 'Basic',
    pro: 'Pro',
    enterprise: 'Enterprise',
    monthly: 'Monthly',
    yearly: 'Yearly',
    daily: 'Daily',
    weekly: 'Weekly',
    hourly: 'Hourly',
    minute: 'Minute',
    hour: 'Hour',
    day: 'Day',
    week: 'Week',
    month: 'Month',
    year: 'Year',
    today: 'Today',
    yesterday: 'Yesterday',
    tomorrow: 'Tomorrow',
    now: 'Now',
    soon: 'Soon',
    later: 'Later',
    never: 'Never',
    always: 'Always',
    sometimes: 'Sometimes',
    often: 'Often',
    rarely: 'Rarely',
    yes: 'Yes',
    no: 'No',
    maybe: 'Maybe',
    ok: 'OK',
    okay: 'Okay',
    sure: 'Sure',
    ofCourse: 'Of course',
    absolutely: 'Absolutely',
    definitely: 'Definitely',
    probably: 'Probably',
    possibly: 'Possibly',
    certainly: 'Certainly',
    exactly: 'Exactly',
    precisely: 'Precisely',
    approximately: 'Approximately',
    around: 'Around',
    nearly: 'Nearly',
    almost: 'Almost',
    quite: 'Quite',
    very: 'Very',
    extremely: 'Extremely',
    incredibly: 'Incredibly',
    amazingly: 'Amazingly',
    wonderfully: 'Wonderfully',
    beautifully: 'Beautifully',
    perfectly: 'Perfectly',
    excellently: 'Excellently',
    fantastically: 'Fantastically',
    brilliantly: 'Brilliantly',
    outstandingly: 'Outstandingly',
    remarkably: 'Remarkably',
    exceptionally: 'Exceptionally',
    extraordinarily: 'Extraordinarily',
    unbelievably: 'Unbelievably',
    
    // Navigation
    home: 'Home',
    about: 'About',
    features: 'Features',
    pricing: 'Pricing',
    contact: 'Contact',
    help: 'Help',
    faq: 'FAQ',
    blog: 'Blog',
    dashboard: 'Dashboard',
    analytics: 'Analytics',
    settings: 'Settings',
    profile: 'Profile',
    logout: 'Logout',
    login: 'Login',
    register: 'Register',
    signup: 'Sign Up',
    signin: 'Sign In',
    forgotPassword: 'Forgot Password?',
    resetPassword: 'Reset Password',
    changePassword: 'Change Password',
    updateProfile: 'Update Profile',
    deleteAccount: 'Delete Account',
    privacy: 'Privacy',
    terms: 'Terms',
    cookies: 'Cookies',
    sitemap: 'Sitemap',
    robots: 'Robots',
    
    // QR Code
    qrTitle: 'QR Code Generator',
    qrDescription: 'Create QR codes for your business',
    qrGenerate: 'Generate QR Code',
    qrDownload: 'Download QR Code',
    qrShare: 'Share QR Code',
    qrCopy: 'Copy QR Code',
    qrPrint: 'Print QR Code',
    qrScan: 'Scan QR Code',
    qrScans: 'Scans',
    qrTotalScans: 'Total Scans',
    qrUniqueVisitors: 'Unique Visitors',
    qrToday: 'Today',
    qrThisWeek: 'This Week',
    qrThisMonth: 'This Month',
    qrThisYear: 'This Year',
    qrAllTime: 'All Time',
    qrLast24Hours: 'Last 24 Hours',
    qrLast7Days: 'Last 7 Days',
    qrLast30Days: 'Last 30 Days',
    qrLast90Days: 'Last 90 Days',
    qrLastYear: 'Last Year',
    qrCustom: 'Custom',
    qrFrom: 'From',
    qrTo: 'To',
    qrDateRange: 'Date Range',
    qrSelectDateRange: 'Select Date Range',
    qrClear: 'Clear',
    qrApply: 'Apply',
    qrReset: 'Reset',
    qrExport: 'Export',
    qrImport: 'Import',
    qrBulk: 'Bulk',
    qrBatch: 'Batch',
    qrMass: 'Mass',
    qrMultiple: 'Multiple',
    qrSingle: 'Single',
    qrIndividual: 'Individual',
    qrPersonal: 'Personal',
    qrBusiness: 'Business',
    qrCommercial: 'Commercial',
    qrEnterprise: 'Enterprise',
    qrProfessional: 'Professional',
    qrPremium: 'Premium',
    qrBasic: 'Basic',
    qrFree: 'Free',
    qrPaid: 'Paid',
    qrSubscription: 'Subscription',
    qrTrial: 'Trial',
    qrDemo: 'Demo',
    qrTest: 'Test',
    qrProduction: 'Production',
    qrDevelopment: 'Development',
    qrStaging: 'Staging',
    qrLocal: 'Local',
    qrRemote: 'Remote',
    qrCloud: 'Cloud',
    qrOnPremise: 'On-Premise',
    qrHybrid: 'Hybrid',
    qrPublic: 'Public',
    qrPrivate: 'Private',
    qrInternal: 'Internal',
    qrExternal: 'External',
    qrGlobal: 'Global',
    qrRegional: 'Regional',
    qrNational: 'National',
    qrInternational: 'International',
    qrWorldwide: 'Worldwide',
    qrUniversal: 'Universal',
    qrSpecific: 'Specific',
    qrGeneral: 'General',
    qrDefault: 'Default',
    qrStandard: 'Standard',
    qrAdvanced: 'Advanced',
    qrExpert: 'Expert',
    qrBeginner: 'Beginner',
    qrIntermediate: 'Intermediate',
    qrAmateur: 'Amateur',
    qrNovice: 'Novice',
    qrVeteran: 'Veteran',
    qrExperienced: 'Experienced',
    qrSkilled: 'Skilled',
    qrTalented: 'Talented',
    qrGifted: 'Gifted',
    qrBrilliant: 'Brilliant',
    qrGenius: 'Genius',
    qrMaster: 'Master',
    qrSpecialist: 'Specialist',
    
    // Additional UI text
    currentPlan: 'Current Plan',
    viewPlans: 'View Plans',
    viewAnalytics: 'View Analytics',
    analyticsEnabled: 'Analytics Enabled',
    copied: 'Copied!',
    copyLink: 'Copy Link',
    contactInformation: 'Contact Information',
    hiddenNetwork: 'Hidden Network',
    plainText: 'Plain Text',
    emailAddress: 'Email Address',
    deleteQRCode: 'Delete QR Code',
    
    // Analytics
    advancedAnalytics: 'Advanced Analytics',
    errorLoadingAnalytics: 'Error Loading Analytics',
    noAnalyticsDataYet: 'No Analytics Data Yet',
    scanTrends: 'Scan Trends',
    deviceTypes: 'Device Types',
    peakHours: 'Peak Hours',
    weeklyActivity: 'Weekly Activity',
    topCountries: 'Top Countries',
    browserUsage: 'Browser Usage',
    
    // Dashboard messages
    subscriptionActivatedMessage: 'Your subscription has been successfully activated. Refreshing your data...',
    checkoutCanceled: 'Checkout Canceled',
    checkoutCanceledMessage: 'Your checkout was canceled. You can try again anytime from the pricing page.',
    qrCodeLimitReached: 'You\'ve reached the maximum number of QR codes for your {plan} plan. Upgrade to create more QR codes.',
    qrCodeUpdated: 'QR Code Updated',
    qrCodeCreated: 'QR Code Created',
    qrCodeSaveSuccess: '{name} has been {action} successfully!',
    updated: 'updated',
    saved: 'saved',
    failedToSaveQRCode: 'Failed to Save QR Code',
    qrCodeDeleted: 'QR Code Deleted',
    qrCodeDeleteSuccess: 'The QR code has been deleted successfully.',
    failedToDeleteQRCode: 'Failed to Delete QR Code',
    trialActive: 'Trial Active',
    remaining: 'remaining',
    manageAndTrackQRCodes: 'Manage and track your QR codes',
    noQRCodesYet: 'No QR codes yet',
    createFirstQRCodeMessage: 'Create your first QR code to get started with analytics',
    
    // Additional Dashboard text
    unexpectedErrorOccurred: 'An unexpected error occurred. Please try again.',
    checkoutFailed: 'Checkout Failed',
    unableToStartCheckout: 'Unable to start checkout. Please try again.',
    unlimited: 'Unlimited',
    qrCodes: 'QR codes',
    scansPerMonth: 'scans/month',
    totalQRCodes: 'Total QR Codes',
    yourQRCodes: 'Your QR Codes',
    
    // QR Generator Modal
    websiteURL: 'Website URL',
    wifiNetwork: 'WiFi Network',
    contactCard: 'Contact Card',
    restaurantMenu: 'Restaurant Menu',
    upgradeToPro: 'Upgrade to Pro',
    upgradeToProMessage: 'to access the Menu Builder and create beautiful digital restaurant menus',
    quickExamples: 'Quick Examples',
    size: 'Size',
    starterPlus: 'Starter+',
    upgradeToStarter: 'Upgrade to Starter',
    upgradeToStarterMessage: 'to customize QR code size ({min}px - {max}px)',
    colorCustomization: 'Color Customization',
    colorCustomizationDescription: 'Customize QR code and background colors',
    upgradeToStarterColorMessage: 'to customize QR code colors and create branded QR codes',
    qrCodeStyling: 'QR Code Styling',
    dotStyles: 'Dot Styles',
    cornerStyles: 'Corner Styles',
    gradientBackgrounds: 'Gradient Backgrounds',
    logoEmbedding: 'Logo Embedding',
    
    // Bulk Operations
    qrCodesDeleted: 'QR Codes Deleted',
    bulkDeleteSuccess: 'Successfully deleted {count} QR code{count, plural, one {} other {s}}',
    bulkDeleteFailed: 'Failed to delete QR codes. Please try again.',
    downloadStarted: 'Download Started',
    bulkDownloadMessage: 'Downloading {count} QR code{count, plural, one {} other {s}}',
    downloadFailed: 'Download Failed',
    bulkDownloadFailed: 'Failed to download QR codes. Please try again.',
    qrCodesSelected: '{count} QR code{count, plural, one {} other {s}} selected',
    clearSelection: 'Clear selection',
    selectAll: 'Select all',
    deleteQRCodes: 'Delete QR Codes',
    actionCannotBeUndone: 'This action cannot be undone.',
    bulkDeleteConfirm: 'Are you sure you want to delete {count} QR code{count, plural, one {} other {s}}?',
    bulkDeleteConfirmMessage: 'This will permanently remove them and all associated analytics data.',
    deleting: 'Deleting...',
    
    // Trial Banner
    starterFeatures: '100 QR codes, 10,000 scans, and advanced analytics',
    proFeatures: '500 QR codes, 500,000 scans, and advanced analytics',
    businessFeatures: 'unlimited QR codes, unlimited scans, and enterprise analytics',
    premiumFeatures: 'premium features',
    starter: 'Starter',
    business: 'Business',
    trialHasEnded: 'Your Trial Has Ended',
    trialExpiredMessage: 'Your 14-day free trial has expired. Upgrade to a paid plan to continue accessing all features.',
    upgradeNow: 'Upgrade Now',
    trialEndingSoon: 'Trial Ending Soon',
    trialEndingMessage: 'Upgrade now to keep using all premium features.',
    freeTrialActive: 'Free Trial Active',
    featuresUnlocked: 'Features Unlocked',
    trialActiveMessage: 'You have full access to {plan} features including {features}!',
    upgradeToKeepFeatures: 'Upgrade to Keep {plan} Features',
    
    // Dashboard Stats
    dynamicQRCodes: 'Dynamic QR Codes',
    withAnalytics: 'With analytics',
    avgScansPerQR: 'Avg. Scans per QR',
    thisMonth: 'This month',
    
    // QR Modal Additional
    startColor: 'Start Color',
    endColor: 'End Color',
    uploadLogo: 'Upload Logo',
    logoFileFormat: 'PNG, JPG up to 2MB',
    analyticsDescription: 'This QR code will track scans and provide detailed analytics including location, device type, and timing data.',
    downloadFormats: 'Download Formats'
  },
  es: {
    // Common
    loading: 'Cargando...',
    error: 'Error',
    success: 'Éxito',
    save: 'Guardar',
    cancel: 'Cancelar',
    delete: 'Eliminar',
    edit: 'Editar',
    create: 'Crear',
    back: 'Atrás',
    next: 'Siguiente',
    previous: 'Anterior',
    close: 'Cerrar',
    open: 'Abrir',
    search: 'Buscar',
    filter: 'Filtrar',
    sort: 'Ordenar',
    refresh: 'Actualizar',
    copy: 'Copiar',
    download: 'Descargar',
    upload: 'Subir',
    share: 'Compartir',
    print: 'Imprimir',
    email: 'Correo electrónico',
    phone: 'Teléfono',
    website: 'Sitio web',
    address: 'Dirección',
    name: 'Nombre',
    description: 'Descripción',
    title: 'Título',
    date: 'Fecha',
    time: 'Hora',
    location: 'Ubicación',
    price: 'Precio',
    quantity: 'Cantidad',
    total: 'Total',
    subtotal: 'Subtotal',
    tax: 'Impuesto',
    discount: 'Descuento',
    free: 'Gratis',
    premium: 'Premium',
    basic: 'Básico',
    pro: 'Pro',
    enterprise: 'Empresa',
    monthly: 'Mensual',
    yearly: 'Anual',
    daily: 'Diario',
    weekly: 'Semanal',
    hourly: 'Por hora',
    minute: 'Minuto',
    hour: 'Hora',
    day: 'Día',
    week: 'Semana',
    month: 'Mes',
    year: 'Año',
    today: 'Hoy',
    yesterday: 'Ayer',
    tomorrow: 'Mañana',
    now: 'Ahora',
    soon: 'Pronto',
    later: 'Más tarde',
    never: 'Nunca',
    always: 'Siempre',
    sometimes: 'A veces',
    often: 'A menudo',
    rarely: 'Raramente',
    yes: 'Sí',
    no: 'No',
    maybe: 'Tal vez',
    ok: 'OK',
    okay: 'Está bien',
    sure: 'Seguro',
    ofCourse: 'Por supuesto',
    absolutely: 'Absolutamente',
    definitely: 'Definitivamente',
    probably: 'Probablemente',
    possibly: 'Posiblemente',
    certainly: 'Ciertamente',
    exactly: 'Exactamente',
    precisely: 'Precisamente',
    approximately: 'Aproximadamente',
    about: 'Acerca de',
    around: 'Alrededor de',
    nearly: 'Casi',
    almost: 'Casi',
    quite: 'Bastante',
    very: 'Muy',
    extremely: 'Extremadamente',
    incredibly: 'Increíblemente',
    amazingly: 'Asombrosamente',
    wonderfully: 'Maravillosamente',
    beautifully: 'Hermosamente',
    perfectly: 'Perfectamente',
    excellently: 'Excelentemente',
    fantastically: 'Fantásticamente',
    brilliantly: 'Brillantemente',
    outstandingly: 'Excepcionalmente',
    remarkably: 'Notablemente',
    exceptionally: 'Excepcionalmente',
    extraordinarily: 'Extraordinariamente',
    unbelievably: 'Increíblemente',
    
    // Navigation
    home: 'Inicio',
    features: 'Características',
    pricing: 'Precios',
    contact: 'Contacto',
    help: 'Ayuda',
    faq: 'Preguntas frecuentes',
    blog: 'Blog',
    dashboard: 'Panel de control',
    analytics: 'Analíticas',
    settings: 'Configuración',
    profile: 'Perfil',
    logout: 'Cerrar sesión',
    login: 'Iniciar sesión',
    register: 'Registrarse',
    signup: 'Registrarse',
    signin: 'Iniciar sesión',
    forgotPassword: '¿Olvidaste tu contraseña?',
    resetPassword: 'Restablecer contraseña',
    changePassword: 'Cambiar contraseña',
    updateProfile: 'Actualizar perfil',
    deleteAccount: 'Eliminar cuenta',
    privacy: 'Privacidad',
    terms: 'Términos',
    cookies: 'Cookies',
    sitemap: 'Mapa del sitio',
    robots: 'Robots',
    
    // QR Code
    qrTitle: 'Generador de Códigos QR',
    qrDescription: 'Crea códigos QR para tu negocio',
    qrGenerate: 'Generar código QR',
    qrDownload: 'Descargar código QR',
    qrShare: 'Compartir código QR',
    qrCopy: 'Copiar código QR',
    qrPrint: 'Imprimir código QR',
    qrScan: 'Escanear código QR',
    qrScans: 'Escaneos',
    qrTotalScans: 'Total de escaneos',
    qrUniqueVisitors: 'Visitantes únicos',
    qrToday: 'Hoy',
    qrThisWeek: 'Esta semana',
    qrThisMonth: 'Este mes',
    qrThisYear: 'Este año',
    qrAllTime: 'Todo el tiempo',
    qrLast24Hours: 'Últimas 24 horas',
    qrLast7Days: 'Últimos 7 días',
    qrLast30Days: 'Últimos 30 días',
    qrLast90Days: 'Últimos 90 días',
    qrLastYear: 'El año pasado',
    qrCustom: 'Personalizado',
    qrFrom: 'Desde',
    qrTo: 'Hasta',
    qrDateRange: 'Rango de fechas',
    qrSelectDateRange: 'Seleccionar rango de fechas',
    qrClear: 'Limpiar',
    qrApply: 'Aplicar',
    qrReset: 'Restablecer',
    qrExport: 'Exportar',
    qrImport: 'Importar',
    qrBulk: 'Masivo',
    qrBatch: 'Lote',
    qrMass: 'Masa',
    qrMultiple: 'Múltiple',
    qrSingle: 'Único',
    qrIndividual: 'Individual',
    qrPersonal: 'Personal',
    qrBusiness: 'Negocio',
    qrCommercial: 'Comercial',
    qrEnterprise: 'Empresa',
    qrProfessional: 'Profesional',
    qrPremium: 'Premium',
    qrBasic: 'Básico',
    qrFree: 'Gratis',
    qrPaid: 'De pago',
    qrSubscription: 'Suscripción',
    qrTrial: 'Prueba',
    qrDemo: 'Demostración',
    qrTest: 'Prueba',
    qrProduction: 'Producción',
    qrDevelopment: 'Desarrollo',
    qrStaging: 'Staging',
    qrRemote: 'Remoto',
    qrCloud: 'Nube',
    qrOnPremise: 'On-Premise',
    qrHybrid: 'Híbrido',
    qrPublic: 'Público',
    qrPrivate: 'Privado',
    qrInternal: 'Interno',
    qrExternal: 'Externo',
    qrGlobal: 'Global',
    qrRegional: 'Regional',
    qrNational: 'Nacional',
    qrInternational: 'Internacional',
    qrWorldwide: 'Mundial',
    qrUniversal: 'Universal',
    qrSpecific: 'Específico',
    qrGeneral: 'General',
    qrDefault: 'Por defecto',
    qrStandard: 'Estándar',
    qrAdvanced: 'Avanzado',
    qrExpert: 'Experto',
    qrBeginner: 'Principiante',
    qrIntermediate: 'Intermedio',
    qrAmateur: 'Aficionado',
    qrNovice: 'Novato',
    qrVeteran: 'Veterano',
    qrExperienced: 'Experimentado',
    qrSkilled: 'Hábil',
    qrTalented: 'Talentoso',
    qrGifted: 'Dotado',
    qrBrilliant: 'Brillante',
    qrGenius: 'Genio',
    qrMaster: 'Maestro',
    qrSpecialist: 'Especialista',
    
    // Additional UI text
    currentPlan: 'Plan Actual',
    viewPlans: 'Ver Planes',
    viewAnalytics: 'Ver Analíticas',
    analyticsEnabled: 'Analíticas Habilitadas',
    copied: '¡Copiado!',
    copyLink: 'Copiar Enlace',
    contactInformation: 'Información de Contacto',
    hiddenNetwork: 'Red Oculta',
    plainText: 'Texto Plano',
    emailAddress: 'Dirección de Correo',
    deleteQRCode: 'Eliminar Código QR',
    
    // Analytics
    advancedAnalytics: 'Analíticas Avanzadas',
    errorLoadingAnalytics: 'Error al Cargar Analíticas',
    noAnalyticsDataYet: 'Aún No Hay Datos de Analíticas',
    scanTrends: 'Tendencias de Escaneo',
    deviceTypes: 'Tipos de Dispositivos',
    peakHours: 'Horas Pico',
    weeklyActivity: 'Actividad Semanal',
    topCountries: 'Países Principales',
    browserUsage: 'Uso del Navegador',
    
    // Dashboard messages
    subscriptionActivatedMessage: 'Tu suscripción ha sido activada exitosamente. Actualizando tus datos...',
    checkoutCanceled: 'Pago Cancelado',
    checkoutCanceledMessage: 'Tu pago fue cancelado. Puedes intentar de nuevo en cualquier momento desde la página de precios.',
    qrCodeLimitReached: 'Has alcanzado el número máximo de códigos QR para tu plan {plan}. Actualiza para crear más códigos QR.',
    qrCodeUpdated: 'Código QR Actualizado',
    qrCodeCreated: 'Código QR Creado',
    qrCodeSaveSuccess: '{name} ha sido {action} exitosamente!',
    updated: 'actualizado',
    saved: 'guardado',
    failedToSaveQRCode: 'Error al Guardar Código QR',
    qrCodeDeleted: 'Código QR Eliminado',
    qrCodeDeleteSuccess: 'El código QR ha sido eliminado exitosamente.',
    failedToDeleteQRCode: 'Error al Eliminar Código QR',
    trialActive: 'Prueba Activa',
    remaining: 'restantes',
    manageAndTrackQRCodes: 'Gestiona y rastrea tus códigos QR',
    noQRCodesYet: 'Aún no hay códigos QR',
    createFirstQRCodeMessage: 'Crea tu primer código QR para comenzar con las analíticas',
    
    // Additional Dashboard text
    unexpectedErrorOccurred: 'Ocurrió un error inesperado. Por favor, inténtalo de nuevo.',
    checkoutFailed: 'Pago Fallido',
    unableToStartCheckout: 'No se pudo iniciar el pago. Por favor, inténtalo de nuevo.',
    unlimited: 'Ilimitado',
    qrCodes: 'códigos QR',
    scansPerMonth: 'escaneos/mes',
    totalQRCodes: 'Total de Códigos QR',
    yourQRCodes: 'Tus Códigos QR',
    
    // QR Generator Modal
    websiteURL: 'URL del Sitio Web',
    wifiNetwork: 'Red WiFi',
    contactCard: 'Tarjeta de Contacto',
    restaurantMenu: 'Menú del Restaurante',
    upgradeToPro: 'Actualizar a Pro',
    upgradeToProMessage: 'para acceder al Constructor de Menús y crear hermosos menús digitales de restaurantes',
    quickExamples: 'Ejemplos Rápidos',
    size: 'Tamaño',
    starterPlus: 'Starter+',
    upgradeToStarter: 'Actualizar a Starter',
    upgradeToStarterMessage: 'para personalizar el tamaño del código QR ({min}px - {max}px)',
    colorCustomization: 'Personalización de Colores',
    colorCustomizationDescription: 'Personaliza los colores del código QR y del fondo',
    upgradeToStarterColorMessage: 'para personalizar los colores del código QR y crear códigos QR con marca',
    qrCodeStyling: 'Estilo del Código QR',
    dotStyles: 'Estilos de Puntos',
    cornerStyles: 'Estilos de Esquinas',
    gradientBackgrounds: 'Fondos Degradados',
    logoEmbedding: 'Inserción de Logo',
    
    // Bulk Operations
    qrCodesDeleted: 'Códigos QR Eliminados',
    bulkDeleteSuccess: 'Se eliminaron exitosamente {count} código{count, plural, one {} other {s}} QR',
    bulkDeleteFailed: 'Error al eliminar los códigos QR. Por favor, inténtalo de nuevo.',
    downloadStarted: 'Descarga Iniciada',
    bulkDownloadMessage: 'Descargando {count} código{count, plural, one {} other {s}} QR',
    downloadFailed: 'Descarga Fallida',
    bulkDownloadFailed: 'Error al descargar los códigos QR. Por favor, inténtalo de nuevo.',
    qrCodesSelected: '{count} código{count, plural, one {} other {s}} QR seleccionado{count, plural, one {} other {s}}',
    clearSelection: 'Limpiar selección',
    selectAll: 'Seleccionar todo',
    deleteQRCodes: 'Eliminar Códigos QR',
    actionCannotBeUndone: 'Esta acción no se puede deshacer.',
    bulkDeleteConfirm: '¿Estás seguro de que quieres eliminar {count} código{count, plural, one {} other {s}} QR?',
    bulkDeleteConfirmMessage: 'Esto los eliminará permanentemente junto con todos los datos de análisis asociados.',
    deleting: 'Eliminando...',
    
    // Trial Banner
    starterFeatures: '100 códigos QR, 10,000 escaneos y análisis avanzados',
    proFeatures: '500 códigos QR, 500,000 escaneos y análisis avanzados',
    businessFeatures: 'códigos QR ilimitados, escaneos ilimitados y análisis empresariales',
    premiumFeatures: 'características premium',
    starter: 'Starter',
    business: 'Empresa',
    trialHasEnded: 'Tu Prueba Ha Terminado',
    trialExpiredMessage: 'Tu prueba gratuita de 14 días ha expirado. Actualiza a un plan de pago para continuar accediendo a todas las características.',
    upgradeNow: 'Actualizar Ahora',
    trialEndingSoon: 'Prueba Terminando Pronto',
    trialEndingMessage: 'Actualiza ahora para seguir usando todas las características premium.',
    freeTrialActive: 'Prueba Gratuita Activa',
    featuresUnlocked: 'Características Desbloqueadas',
    trialActiveMessage: 'Tienes acceso completo a las características de {plan} incluyendo {features}!',
    upgradeToKeepFeatures: 'Actualizar para Mantener las Características de {plan}',
    
    // Dashboard Stats
    dynamicQRCodes: 'Códigos QR Dinámicos',
    withAnalytics: 'Con análisis',
    avgScansPerQR: 'Promedio de Escaneos por QR',
    thisMonth: 'Este mes',
    
    // QR Modal Additional
    startColor: 'Color Inicial',
    endColor: 'Color Final',
    uploadLogo: 'Subir Logo',
    logoFileFormat: 'PNG, JPG hasta 2MB',
    analyticsDescription: 'Este código QR rastreará los escaneos y proporcionará análisis detallados incluyendo ubicación, tipo de dispositivo y datos de tiempo.',
    downloadFormats: 'Formatos de Descarga'
  }
}

// Global language state
let currentLanguage: Language = 'en'
const listeners = new Set<() => void>()

// Language management functions
const setLanguageGlobal = (lang: Language) => {
  currentLanguage = lang
  if (typeof window !== 'undefined') {
    localStorage.setItem('language', lang)
  }
  listeners.forEach(listener => listener())
}

export const getLanguage = (): Language => {
  return currentLanguage
}

// Hook for using translations
export function useSimpleTranslation() {
  const [language, setLanguageState] = useState<Language>(currentLanguage)

  useEffect(() => {
    // Load language from localStorage on mount
    if (typeof window !== 'undefined') {
      const savedLanguage = localStorage.getItem('language') as Language
      if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'es')) {
        currentLanguage = savedLanguage
        setLanguageState(savedLanguage)
      }
    }

    // Listen for language changes
    const listener = () => setLanguageState(currentLanguage)
    listeners.add(listener)

    return () => {
      listeners.delete(listener)
    }
  }, [])

  const t = (key: string, params?: Record<string, string>): string => {
    let translation = translations[language]?.[key as keyof typeof translations[typeof language]] || key
    
    // Handle parameter interpolation
    if (params) {
      Object.keys(params).forEach(param => {
        translation = translation.replace(`{${param}}`, params[param])
      })
    }
    
    return translation
  }

  return { t, language, setLanguage: setLanguageGlobal }
}
